package com.svedentsov.aqa.tasks.strings;

import java.util.regex.Pattern;

/**
 * Решение задачи №80: Регулярное выражение для поиска/валидации.
 * Описание: Написать простое регулярное выражение (например, для поиска
 * телефонного номера). (Проверяет: основы регулярных выражений)
 * Задание: Напишите метод `boolean isValidPhoneNumber(String number)`, который
 * использует регулярное выражение для проверки, соответствует ли строка `number`
 * простому формату телефонного номера, например, `+7-XXX-XXX-XX-XX`
 * (где X - цифра).
 * Пример: `isValidPhoneNumber("+7-911-123-45-67")` -> `true`.
 * `isValidPhoneNumber("89111234567")` -> `false`.
 */
public class SimpleRegex {

    // Регулярное выражение для формата +7-XXX-XXX-XX-XX
    // ^       : Начало строки
    // \+      : Буквальный символ '+'
    // 7       : Цифра '7'
    // -       : Буквальный дефис
    // \d{3}   : Ровно 3 цифры (эквивалентно [0-9]{3})
    // -       : Буквальный дефис
    // \d{3}   : Ровно 3 цифры
    // -       : Буквальный дефис
    // \d{2}   : Ровно 2 цифры
    // -       : Буквальный дефис
    // \d{2}   : Ровно 2 цифры
    // $       : Конец строки
    // Pattern потокобезопасен и может быть скомпилирован один раз
    private static final Pattern PHONE_PATTERN_RU_MOBILE =
            Pattern.compile("^\\+7-\\d{3}-\\d{3}-\\d{2}-\\d{2}$");

    /**
     * Проверяет, соответствует ли строка {@code number} формату
     * российского мобильного номера +7-XXX-XXX-XX-XX с использованием
     * регулярного выражения.
     *
     * @param number Строка для проверки. Может быть null.
     * @return {@code true}, если строка не null и соответствует формату,
     * {@code false} в противном случае.
     */
    public boolean isValidPhoneNumber(String number) {
        if (number == null) {
            return false;
        }
        // Используем Matcher для проверки соответствия строки шаблону
        return PHONE_PATTERN_RU_MOBILE.matcher(number).matches();
    }
}
